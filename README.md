# Task API
 
 JavaのSpring Bootを利用したタスクを管理するAPIでサンプルとしてGETのエンドポイントだけある
 
 # 使用技術
 
 ### checkstyle
 
 コードが整形できているか確認するツールのことで、設定ファイルは有名なJava Google Styleを利用する。
 
 以下の記事を参考にしてコーディング中に自動整形できるようにIDEにも適用していく。
 
 https://nainaistar.hatenablog.com/entry/2021/02/01/120000
 
 
 ### JIG
 
 classファイルから図などを可視化するツールのことで、コードでの設計を支援できる。
 
 https://github.com/dddjava/jig
 
 コンセプトとして三層+ドメインモデルのアーキテクチャで実装されたコードから以下の分析・設計情報を生成する。
 
 - ドメインモデルのクラスに記述された業務の概念とビジネスルール
 - アプリケーション層に記述された業務機能
 
 ### jacoco
 
 単体テストでコードカバレッジのレポートが出力できるライブラリ
 
 レポートはステートメントカバレッジ（C0）とブランチカバレッジ（C1）という観点から出力可能
 
 https://www.eclemma.org/jacoco/
 
 # 設計思想
 
 ドメイン駆動設計: ビジネスの問題を解決するためにビジネスの理解を進めビジネスを表現する。ドメインについて学び、ドメインモデルを作り上げ、それをドメインオブジェクトとして実現する。
 
 ### 値オブジェクト
 
 システム固有の値を表現するオブジェクト
 
 性質
 - 不変である（計算などを行うと新しいインスタンスを返却する）
 - 交換が可能である
 - 透過性によって比較される
 
 導入するモチベーション
 - コードが表現力を増す（自己文章化）
 - 不正な値を存在させない
 - 誤った代入を防ぐ
 - ロジックの散財を防ぐ（DRY原則）
 
 type package以下の「Done」「Id」「TaskDesc」など
 
 ### エンティティ
 
 属性ではなく同一性によって識別されるオブジェクト
 
 性質
 - 可変である（属性を変更できる）
 - 同じ属性であっても区別される（エンティティ同氏を区別するためには識別子が利用される）
 - 同一性によって区別される（識別子だけが比較の対象）
 
 導入するモチベーション
 - コードが表現力を増す
 - ドメインにおける変更をコードに伝えやすくする、ドメインモデルのルールが記載されているところは明白
 
 ### 依存関係の逆転
 
 プログラムのレベルというのは入出力からの距離を示していて、低レベルは機械に近く、高レベルは人間に近い抽象的な処理を指す。
 
 上位のモジュールがデータストアの操作を行う下位レベルのモジュールに依存しているというのは、「上位のモジュールは下位レベルのモジュールに依存してはいけない」というのが原則に反しているので、インタフェース型を使って主導権を抽象にする。
 
 今回の実装で言うとTaskRepositoryが抽象クラスである。
 
 インタフェースを宣言し低レベルのモジュールはそのインタフェースに合わせて実装することで、より重要な高次元の概念に主導権を握らせることができる
 
 # テスト
 
 ### 責務を明確にする重要さ
 
 無尽蔵に機能を備えたモノリシック・アーキテクチャは完全なレガシーコード※ であり、それに機能追加することは容易ではない。
 
 ある機能のエントリポイントからエンドポイントに至るまでは迷宮のような関数呼び出しを通して変数が書き換えられているので、もはや1行1行読んで紐解いていく以外に術はない。
 
 その結末として、結果整合性のみを担保するテストが出来上がっていくが、イレギュラーパターンに弱く、規模の大きな機能修正に弱く、そのメンテナンスはエンジニア個人の経験と勘に頼ってしまう。
 
 責務が曖昧なトランザクションスクリプトに対しては単体テストが書くことができない。
 
 
 ※ レガシーコード: 修正や拡張、作業が難しいコード。保守性に重きをおいてこないことによって最初に使ったよりもはるかに多額のコストと努力をソフトウェア保守に費やすことになった。
 
 ### ソフトウェアテストの７原則
 
 1. テストは欠陥があることは示せるが、欠陥がないことは示せない
 2. 全数テストは不可能
 3. 早期テストで時間とコストを節約
 4. 欠陥の偏在
 5. 殺虫剤のパラドックスにご用心
 6. テストは状況次第
 7. 「バグゼロ」の落とし穴
 
 - テストは欠陥が起きないことの証明ではなく、リスク回避のために存在する
 - テストはコード品質を上げるための手段である
 
 # Next Action
 
 - [ ] taskをまとめあげるコレクションオブジェクトを導入する
 - [ ] serviceとinfrastructureのtestを実装する
 
